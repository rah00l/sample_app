<% resource_object,resource = identify_resource(params) %>
<%= form_tag({:controller => 'tags',
              :action => 'attach_tags',
              :object_type => resource,
              "#{resource}_id" => resource_object},
              :remote => true,
              :method => :post,
              :id => 'new-attache-tag-form') do %>

<p><%= label_tag "Search Tags for #{resource}" %><%= text_field_tag 'tag_search', nil %></p>
  <%= javascript_tag "observeSearchfield('tag_search', 'tags_for_resource', '#{ escape_javascript url_for(:controller => 'tags',
                 :action => 'autocomplete_for_tag',
                 :object_type => resource,
                 "#{resource}_id" => resource_object) }')" %>
<div id="tags_for_resource">
	<%= principals_check_box_tags "#{resource}[tag_ids][]", tags %>
</div>

<p class="buttons">
    <%= submit_tag "Add", :name => nil, :onclick => "hideModal(this);" %>
    <%= submit_tag "Cancel", :name => nil, :onclick => "hideModal(this);", :type => 'button' %>
</p>
<% end %>